events {}
# Define global event-related settings (like connections, worker processes)
# Currently empty, using default settings

http {
    # HTTP context: contains all configuration related to HTTP traffic

    include /etc/nginx/mime.types;
    # Include MIME types mapping file
    # This tells NGINX how to serve files with correct Content-Type header

    server {
        # Define a server block (virtual host) that handles incoming requests

        listen 443 ssl;
        # Listen on port 443 for HTTPS connections
        # 'ssl' enables TLS/SSL for secure communication

        server_name souaammo.42.fr;
        # Domain name for this server block
        # Requests matching this domain will be handled here

        ssl_certificate /etc/nginx/ssl/inception.crt;
        ssl_certificate_key /etc/nginx/ssl/inception.key;
        # Specify the SSL certificate and private key paths
        # Used to encrypt traffic and enable HTTPS

        ssl_protocols TLSv1.2 TLSv1.3;
        # Only allow secure TLS protocols
        # TLSv1.2 and TLSv1.3 are modern and safe versions

        root /var/www/html;
        # Set the root directory for serving web files

        index index.php index.html;
        # Default files to serve if the client requests a directory
        # NGINX will look for index.php first, then index.html

        location ~ \.php$ {
            # Handle PHP files using FastCGI
            # The ~ means this is a regex match for URLs ending with .php

            include snippets/fastcgi-php.conf;
            # Include standard FastCGI configuration for PHP

            fastcgi_pass wordpress:9000;
            # Forward PHP requests to the WordPress container running PHP-FPM on port 9000
            # NGINX acts as a reverse proxy here
        }
    }
}